var _=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var L=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var g=(t,e,n)=>(_(t,e,"access private method"),n);function se(){import("data:text/javascript,")}const Y=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Y();class R{constructor(e,n){this.title=e,this.html=n}}class y{constructor(){this.view=new R}setTitle(e){return this.view.title=e,this}setHtml(e){return this.view.html=e,this}build(){return this.view}}function N(t){const e=t;return e?(Object.entries(e).forEach(([n,r])=>{e[n]=new Audio(r)}),e):{}}function M(t){const e=t;e instanceof Audio&&e.pause()}function U(t){const e=t;return e?(Object.entries(e).forEach(([n])=>{M(e[n])}),{}):{}}function b(t,{delay:e=0,loop:n=!1}={}){const r=t;if(!(r instanceof Audio))return;function i(){r.pause(),r.currentTime=0,r.play()}n===!0&&(typeof r.loop=="boolean"?r.loop=!0:r.addEventListener("ended",i,!1)),setTimeout(i,e)}var f,h;class G{constructor(){L(this,f);this.time=0,this.current=0,this.timer=null}start(){this.time=new Date}stop(){clearInterval(this.timer)}getMilliseconds(){return g(this,f,h).call(this).getTime()}getSeconds(){return g(this,f,h).call(this).getTime()/1e3}getFormated(){const e=g(this,f,h).call(this),n=`${e.getHours()}`,r=`${e.getMinutes()}`,i=`${e.getSeconds()}`;let o=`${e.getMilliseconds()}`;o.length<2?o=`00${o}`:o.length<3&&(o=`0${o}`);const c=[n,r,i];return c.forEach((u,p)=>{u.length<2&&(c[p]=`0${u}`)}),[...c,o].join(":")}}f=new WeakSet,h=function(){return this.current=new Date,new Date(this.current-this.time)};const T={moves:0,matched:0,wrong:0,time:void 0,date:void 0,running:!1,win:!1},s={icons:["\u{1F911}","\u{1F525}","\u{1F916}","\u{1F438}","\u{1F99C}","\u{1F98B}","\u26BD","\u{1F48E}"],delay:600,maxTries:8,timer:new G,cardIdAttr:"data-card-id",music:!0,localStorageKey:"memory-game-state-date-2022-07-06"},B=N({reward:new URL("./assets/game_reward.698d9f57.mp3",self.location).href,sanction:new URL("./assets/game_sanction.5d447fd3.mp3",self.location).href,over:new URL("./assets/game_over.e081139d.mp3",self.location).href,running:new URL("./assets/game_running.58bbb562.mp3",self.location).href,win:new URL("./assets/game_win.ff2e2233.mp3",self.location).href});function K(t,e){const n=e,r=t,i=new y;return i.setTitle("card"),i.setHtml(`
  <div class="card" ${s.cardIdAttr}="${r}">
      <div class="card-front"></div>
      <div class="card-back">${n}</div>
  </div>
  `),i.build()}function J(t){const e=t,n=new y;let r="";return e.forEach(i=>{r+=K(i.id,i.content).html}),n.setHtml(r).build()}function P(t){const e=t,n=[];for(;e.length>0;){const r=Math.floor(Math.random()*e.length);n.push(e[r]),e.splice(r,1)}return n}function V(t,e,n=!0){return n&&t(),setInterval(()=>{t()},e)}function F(t){const e=new Date(t),n=`${e.getHours()}`,r=`${e.getMinutes()}`,i=`${e.getSeconds()}`;let o=`${e.getMilliseconds()}`;o.length<2?o=`00${o}`:o.length<3&&(o=`0${o}`);const c=[n,r,i];return c.forEach((u,p)=>{u.length<2&&(c[p]=`0${u}`)}),[...c,o].join(":")}function W(t){const e=new Date(t);let n=`${e.getMonth()+1}`,r=`${e.getDate()}`;const i=e.getFullYear();return n.length<2&&(n=`0${n}`),r.length<2&&(r=`0${r}`),[i,n,r].join("-")}function q(t,e){return{id:t,content:e}}function Q(t){const e=t,n=[];return e.forEach((r,i)=>{n.push(q(i,r))}),P([...n,...n])}function X(t){const e=new y;return e.setHtml(`
  <table>
    <thead>
      <th>id</th>
      <th>win</th>
      <th>moves</th>
      <th>accuracy</th>
      <th>time</th>
      <th>date</th>
    </thead>
    <tbody>${t}</tbody>
  </table>
  `),e.build()}function E(t,e,n,r,i,o){const c=new y;return c.setHtml(`
  <tr>
    <td>${t||"#"}</td>
    <td class="${e===!0?"winner":"loser"}"</td>
    <td>${n||"#"}</td>
    <td>${r||0}%</td>
    <td>${i?F(i):"HH:mm:SS"}</td>
    <td>${o?W(o):"YYYY-MM-DD"}</td>
  </tr>
  `),c.build()}function Z(t){let e="";return t.forEach((n,r)=>{const{moves:i,win:o,maxTries:c,wrong:u,time:p,date:O}=n,C=Math.trunc(100*(1-u/c));e+=E(r+1,o,i,C,p,O).html}),e||(e+=E("","","","","").html.repeat(8)),X(e).html}class ee{constructor(){this.music=void 0,this.stats=[]}}class x{constructor(){this.data=new ee}setMusic(e){if(typeof e!="boolean")throw new Error("Whoops data.music is not a boolean");return this.data.music=e,this}setStats(e){if(typeof e!="object")throw new Error("Whoops data.stats is not an array");return this.data.stats=e,this}build(){return this.data}}let d={...T},l=s.music?{...B}:{};const k=s.localStorageKey,v=localStorage.getItem(k);let m=v?JSON.parse(v):new x().setMusic(s.music).build(),A=null;const{cardIdAttr:I}=s,a={board:document.getElementById("board"),welcom:document.getElementById("welcom"),game:document.getElementById("game"),ranking:document.getElementById("rankingView"),sidebar:{start:document.getElementById("start"),stop:document.getElementById("stop"),restart:document.getElementById("restart"),music:document.getElementById("music"),ranking:document.getElementById("rankingBtn")},scores:{moves:document.getElementById("moves"),matched:document.getElementById("matched"),remained:document.getElementById("remained"),time:document.getElementById("time")}};function D(t){if(m=new x().setMusic(t).build(),localStorage.setItem(k,JSON.stringify(m)),t===!0){a.sidebar.music.classList.remove("disabled"),l={...B},s.music=!0,d.running&&b(l.running,{loop:!0});return}a.sidebar.music.classList.add("disabled"),l=U(l),s.music=!1}v&&(s.music=m.music);D(s.music);function z(t=null){const e=t;Array.from(a.board.children).map(n=>n.classList.add("d-none")),e&&e.classList.remove("d-none")}function w(){d.running=!1,s.timer.stop(),clearInterval(A),M(l.running),a.game.classList.add("freeze"),a.sidebar.stop.classList.add("freeze","disabled")}function $(t=!1){d.win=t,d.time=s.timer.getMilliseconds(),d.running=void 0;const e={maxTries:s.maxTries,...d};m=new x().setMusic(s.music).setStats([e,...m.stats]).build(),localStorage.setItem(k,JSON.stringify(m)),d={...T},d.running=!1}function S(){if(d.matched===s.icons.length){w(),$(!0),b(l.win);return}d.wrong===s.maxTries&&(w(),$(),b(l.over,{delay:s.delay}))}function te(t){const e={delay:s.delay/2},n=t.filter(r=>r.classList.contains("flipped"));if(n.length===2){if(d.moves+=1,a.scores.moves.textContent=d.moves,setTimeout(()=>{n.map(r=>r.classList.remove("flipped"))},s.delay),n[0].getAttribute(I)===n[1].getAttribute(I)){n.map(r=>r.classList.add("matched")),b(l.reward,e),d.matched+=1,a.scores.matched.textContent=d.matched,S();return}d.wrong+=1,a.scores.remained.textContent=s.maxTries-d.wrong,b(l.sanction,e),S()}}function j(){d.running=!0,d.date=new Date().getTime();const t=Q(s.icons);z(a.game),a.game.innerHTML=J(t).html,a.sidebar.start.classList.add("freeze","disabled"),a.sidebar.ranking.classList.add("freeze","disabled"),a.game.classList.remove("freeze"),a.sidebar.stop.classList.remove("freeze","disabled"),a.sidebar.restart.classList.remove("freeze","disabled"),a.scores.remained.textContent=s.maxTries-d.wrong,b(l.running,{loop:!0}),s.timer.start();const e=Array.from(a.game.children);e.forEach(n=>{n.addEventListener("click",async()=>{n.classList.add("flipped"),te(e)})}),A=V(()=>{a.scores.time.textContent=Math.trunc(s.timer.getSeconds())},1e3)}function H(t=null){a.sidebar.start.classList.remove("freeze","disabled"),a.sidebar.ranking.classList.remove("freeze","disabled"),a.sidebar.stop.classList.add("freeze","disabled"),a.sidebar.restart.classList.add("freeze","disabled"),z(t),Object.entries(a.scores).forEach(e=>{e[1].textContent="0"}),a.game.innerHTML=""}function ne(){w(),H(a.welcom)}function re(){w(),H(),j()}function ie(){D(!s.music)}function oe(){a.ranking.innerHTML=Z(m.stats),z(a.ranking)}a.sidebar.start.addEventListener("click",j);a.sidebar.stop.addEventListener("click",ne);a.sidebar.restart.addEventListener("click",re);a.sidebar.music.addEventListener("click",ie);a.sidebar.ranking.addEventListener("click",oe);export{se as __vite_legacy_guard};
